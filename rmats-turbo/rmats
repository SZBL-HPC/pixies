#!/usr/bin/env bash
set -euo pipefail

# Resolve the full path of the script, even if it is a symlink
SOURCE="${BASH_SOURCE[0]}"
while [ -h "$SOURCE" ]; do
  DIR="$(cd -P "$(dirname "$SOURCE")" >/dev/null 2>&1 && pwd)"
  SOURCE="$(readlink "$SOURCE")"
  [[ $SOURCE != /* ]] && SOURCE="$DIR/$SOURCE"
done
SCRIPT_DIR="$(cd -P "$(dirname "$SOURCE")" >/dev/null 2>&1 && pwd)"

# Run rmats.py inside the Pixi environment
pixi run -m "$SCRIPT_DIR" python3 "$SCRIPT_DIR/rmats-turbo/rmats.py" "$@"
